{% load static %}
{% block head %}
<link rel="stylesheet" href="{% static 'css/index.css' %}">

{% endblock head %}
<!-- Navbar -->
<header>
    <a href="/" class="logo"><i class='bx bxs-book-reader' ></i>AcademiConnect</a>
    <!-- Menu Icon -->
    <div class="bx bx-menu" id="menu-icon"></div>
    <!-- Nav List -->
    <ul class="navbar">
        <li><a href="/" class="home-active">Home</a></li>
        <li><a href="/all-courses">Courses</a></li>
        <li><a href="#progress">Progress</a></li>
        <li><a href="#students">Students</a></li>
        <li><a href="#about">About</a></li>
        
    </ul>
    <!-- profile -->
    {% if user.is_authenticated %}
    <!-- Profile for authenticated users -->
    <div class="dropdown" style="position: relative;">
        <button class="dropbtn" style="background-color: transparent; border: none; cursor: pointer; display: flex; align-items: center;">
            <i class='bx bxs-user-circle' style="font-size: 50px;"></i>
            <span style="font-size: 16px; margin-left: 10px; color: black;">{{ user.username }}</span>
        </button>
        <div class="dropdown-content" style="display: none; position: absolute; background-color: #f9f9f9; min-width: 120px; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);">
            <a href="#" style="color: #333; text-decoration: none; display: block; padding: 10px;">Profile</a>
            <a href="{% url 'my_courses' %}" style="color: #333; text-decoration: none; display: block; padding: 10px;">My Courses</a>
            <a href="{% url 'logout' %}" style="color: #333; text-decoration: none; display: block; padding: 10px;">Logout</a>
        </div>
    </div>
    {% else %}
    <!-- Login and Register for unauthenticated users -->
    <div class="login-register">
        <a href="{% url 'login' %}" style="text-decoration: none; color: #333;">Login</a>
        <a href="{% url 'register' %}" style="text-decoration: none; color: #333;">Register</a>
    </div>
    {% endif %}
</header>

<script>
// Toggle dropdown for authenticated users
document.addEventListener('DOMContentLoaded', function() {
    const dropdownBtn = document.querySelector('.dropbtn');
    const dropdownContent = document.querySelector('.dropdown-content');
    
    if (dropdownBtn && dropdownContent) {
        dropdownBtn.addEventListener('click', function() {
            dropdownContent.style.display = (dropdownContent.style.display === 'block') ? 'none' : 'block';
        });

        document.addEventListener('click', function(event) {
            if (!dropdownContent.contains(event.target) && event.target !== dropdownBtn) {
                dropdownContent.style.display = 'none';
            }
        });
    }
});
</script>